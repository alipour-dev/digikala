const html=document.documentElement,head=document.head,body=document.body;function init(){initCountdown(),initCounter(),initHighlighter(),initMegaMenu(),initSwiper(),initTextarea(),initThemeSwitcher(),initTooltips()}function setJSClass(){html.classList.contains("no-js")?html.classList.replace("no-js","js"):html.classList.add("js")}function convertPersianToEnglishNumber(t){let e=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"],n=["0","1","2","3","4","5","6","7","8","9"];return t.replace(/[۰-۹]/g,t=>n[e.indexOf(t)])}function convertEnglishToPersianNumber(t){let e=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"];return t.toString().replace(/[0-9]/g,t=>e[parseInt(t)])}function initCountdown(){let t=document.getElementById("countdown");if(!t)return;function e(t,e){return t.toString().padStart(e,"0")}let n=new Date(Date.now()+432e5);function i(){let i=new Date;if(n-i<=0){t.textContent="پیشنهاد منقضی شده است!";return}let r=dateFns.intervalToDuration({start:i,end:n}),o=document.getElementById("days"),l=document.getElementById("hours"),s=document.getElementById("minutes"),a=document.getElementById("seconds");o&&(o.textContent=convertEnglishToPersianNumber(e(r.days||0,2))),l&&(l.textContent=convertEnglishToPersianNumber(e(r.hours||0,2))),s&&(s.textContent=convertEnglishToPersianNumber(e(r.minutes||0,2))),a&&(a.textContent=convertEnglishToPersianNumber(e(r.seconds||0,2)))}i(),setInterval(i,1e3)}function initCounter(){let t=document.querySelectorAll(".cart-counter");0!==t.length&&t.forEach(t=>{let e=t.querySelector(".cart-counter-plus"),n=t.querySelector(".cart-counter-minus"),i=t.querySelector(".cart-counter-int");e.addEventListener("click",()=>{let t=parseInt(convertPersianToEnglishNumber(i.textContent.trim()),10);isNaN(t)||(t+=1,i.textContent=convertEnglishToPersianNumber(t))}),n.addEventListener("click",()=>{let t=parseInt(convertPersianToEnglishNumber(i.textContent.trim()),10);!isNaN(t)&&t>0&&(t-=1,i.textContent=convertEnglishToPersianNumber(t))})})}function initHighlighter(){let t=document.getElementById("product-selectColor");if(!t)return;let e=document.querySelector(".product-selectColor input[type='radio']:checked");if(e){let n=e.parentElement.parentElement,i=e.offsetLeft-n.offsetWidth/4;n.scroll({left:i,behavior:"smooth"})}}function initMegaMenu(){let t=document.querySelectorAll(".header-megamenu");0!==t.length&&t.forEach(e=>{e.addEventListener("mouseover",function(){[...t].forEach(t=>{t.classList.remove("active")}),e.classList.add("active")})})}function initSwiper(){let t=document.querySelectorAll(".swiper");0!==t.length&&t.forEach(t=>{let e={};try{e=t.dataset.swiperOptions?JSON.parse(t.dataset.swiperOptions):{}}catch(n){console.warn("Invalid Swiper options JSON in data attribute:",n)}let i={navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination"},...e};new Swiper(t,i),console.log(t)})}function initTextarea(){let t=document.getElementById("productModalTextarea");if(!t)return;let e=document.getElementById("productModalTextareaInt");e&&t.addEventListener("input",function n(){let i=t.value.length;i>100&&(t.value=t.value.substring(0,100),i=100),e.textContent=`${i}/100`})}function initThemeSwitcher(){let t=document.querySelector(".btn-toggle");if(!t)return;let e={LABELS:{DARK_MODE:"حالت تاریک",LIGHT_MODE:"حالت روشن"},ICONS:{DARK_MODE:"ti-moon",LIGHT_MODE:"ti-brightness-up"}},n=t.querySelector(".fw-bold"),i=t.querySelector(".ti"),r=localStorage.getItem("bsTheme");"dark"===r&&(html.setAttribute("data-bs-theme","dark"),n&&(n.textContent=e.LABELS.LIGHT_MODE),i&&i.classList.replace(e.ICONS.DARK_MODE,e.ICONS.LIGHT_MODE)),t.addEventListener("click",()=>{let t=html.getAttribute("data-bs-theme");"dark"===t?(html.setAttribute("data-bs-theme","light"),localStorage.setItem("bsTheme","light"),n&&(n.textContent=e.LABELS.DARK_MODE),i&&i.classList.replace(e.ICONS.LIGHT_MODE,e.ICONS.DARK_MODE)):(html.setAttribute("data-bs-theme","dark"),localStorage.setItem("bsTheme","dark"),n&&(n.textContent=e.LABELS.LIGHT_MODE),i&&i.classList.replace(e.ICONS.DARK_MODE,e.ICONS.LIGHT_MODE))})}function initTooltips(){let t=document.querySelectorAll("[data-bs-toggle='tooltip']");0!==t.length&&t.forEach(t=>{new bootstrap.Tooltip(t)})}document.addEventListener("DOMContentLoaded",function(){setJSClass(),init()});